{"version":3,"file":"pie.component.js","sourceRoot":"","sources":["../../../components/charts/pie/pie.component.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,sCAA+G;AAC/G,yDAAyC;AASzC;IAWE,sBAAoB,IAAY;QAAhC,iBAAqC;QAAjB,SAAI,GAAJ,IAAI,CAAQ;QATvB,eAAU,GAAG,EAAE,CAAC;QAOf,gBAAW,GAAG,IAAI,mBAAY,EAAa,CAAC;QAwDtD,eAAU,GAAG,UAAC,KAAK;YACjB,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC/B,CAAC,CAAA;IAxDmC,CAAC;IAErC,+BAAQ,GAAR;QACE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IAChD,CAAC;IAEO,kCAAW,GAAnB,UAAoB,MAAM;QACxB,OAAO,IAAI,0BAAK,CAAC;YACf,KAAK,EAAE;gBACL,mBAAmB,EAAE,IAAI;gBACzB,eAAe,EAAE,IAAI;gBACrB,UAAU,EAAE,KAAK;gBACjB,IAAI,EAAE,KAAK;aACZ;YACD,KAAK,EAAE;gBACL,IAAI,EAAE,IAAI,CAAC,UAAU;aACtB;YAID,OAAO,EAAE;gBACP,OAAO,EAAE,KAAK;aACf;YACD,WAAW,EAAE;gBACX,GAAG,EAAE;oBACH,gBAAgB,EAAE,IAAI;oBACtB,MAAM,EAAE,SAAS;oBACjB,UAAU,EAAE;wBACV,OAAO,EAAE,IAAI;wBACb,MAAM,EAAE,+CAA+C;qBAMxD;iBAEF;gBACD,MAAM,EAAE;oBACN,MAAM,EAAE,SAAS;oBACjB,MAAM,EAAE;wBACN,KAAK,EAAE,IAAI,CAAC,UAAU;qBACvB;iBACF;aAEF;YACD,MAAM,EAAE,CAAC,MAAM,CAAC;SACjB,CAAC,CAAC;IACL,CAAC;IAUD,kCAAW,GAAX,UAAY,OAAsB;QAAlC,iBAMC;QALC,IAAI,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,WAAW,EAAE;YACvD,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC;gBACZ,KAAI,CAAC,QAAQ,GAAG,KAAI,CAAC,WAAW,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,YAAY,CAAC,CAAC;YACnE,CAAC,CAAC,CAAC;SACJ;IACH,CAAC;IAED,mCAAY,GAAZ,UAAa,CAAM;IACnB,CAAC;IA5EQ;QAAR,YAAK,EAAE;;oDAAiB;IAIhB;QAAR,YAAK,EAAE;;gDAAQ;IAGN;QAAT,aAAM,EAAE;;qDAA6C;IAT3C,YAAY;QAPxB,gBAAS,CAAC;YACT,QAAQ,EAAE,UAAU;YAClB,MAAM,EAAE;gBACJ,eAAe;aAClB;YACD,QAAQ,EAAE,uDAAmD;SAChE,CAAC;yCAY0B,aAAM;OAXrB,YAAY,CA+ExB;IAAD,mBAAC;CAAA,AA/ED,IA+EC;AA/EY,oCAAY","sourcesContent":["import {Component, EventEmitter, Input, NgZone, OnChanges, OnInit, Output, SimpleChanges} from '@angular/core';\nimport {Chart} from 'angular-highcharts';\n\n@Component({\n  selector: 'dash-pie',\n    styles: [\n        '.pieHolder {}'\n    ],\n    template: `<div [chart]=\"pieChart\"  class=\"pieHolder\"></div>`\n})\nexport class PieComponent implements OnChanges, OnInit {\n\n  @Input() chartTitle = '';\n\n  // E.G. Series:\n  // [{name: 'Brands', data: [{name: 'IE', y: 56.33}, {name: 'Chrome', y: 24.03}]}]\n  @Input() series;\n  public pieChart;\n\n  @Output() clickOutput = new EventEmitter<string []>();\n\n  constructor(private zone: NgZone) { }\n\n  ngOnInit() {\n    this.pieChart = this.getPieChart(this.series);\n  }\n\n  private getPieChart(series) {\n    return new Chart({\n      chart: {\n        plotBackgroundColor: null,\n        plotBorderWidth: null,\n        plotShadow: false,\n        type: 'pie'\n      },\n      title: {\n        text: this.chartTitle\n      },\n      // tooltip: {\n      //   pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'\n      // },\n      credits: {\n        enabled: false\n      },\n      plotOptions: {\n        pie: {\n          allowPointSelect: true,\n          cursor: 'pointer',\n          dataLabels: {\n            enabled: true,\n            format: '<b>{point.name}</b>: {point.percentage:.1f} %'\n            // format:  '<b>{point.name}</b>: {point.y}'\n            /*,\n          style: {\n            color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'\n          }*/\n          },\n\n        },\n        series: {\n          cursor: 'pointer',\n          events: {\n            click: this.chartClick,\n          },\n        },\n\n      },\n      series: [series]\n    });\n  }\n\n  /*\n  *   Selecting elements on charts or from the outside, will also alter the selected filter elements\n  */\n\n  chartClick = (event) => {\n    this.clickOutput.emit(event);\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes['series'] && !changes['series'].firstChange) {\n      this.zone.run(() => {\n        this.pieChart = this.getPieChart(changes['series'].currentValue);\n      });\n    }\n  }\n\n  convertPoint(a: any) {\n  }\n}\n"]}