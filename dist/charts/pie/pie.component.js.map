{"version":3,"file":"pie.component.js","sourceRoot":"","sources":["../../../components/charts/pie/pie.component.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;gBAuCI,sBAAoB,IAAY,EACZ,UAAsB;oBAD1C,iBAEC;oBAFmB,SAAI,GAAJ,IAAI,CAAQ;oBACZ,eAAU,GAAV,UAAU,CAAY;oBAvBjC,UAAK,GAAW,EAAE,CAAC;oBAGnB,eAAU,GAAG,EAAE,CAAC;oBAChB,kBAAa,GAAG,EAAE,CAAC;oBACnB,oBAAe,GAAG,QAAQ,CAAC;oBAE3B,iBAAY,GAAG,IAAI,CAAC;oBACpB,sBAAiB,GAAG,IAAI,CAAC;oBACzB,qBAAgB,GAAG,KAAK,CAAC;oBACzB,sBAAiB,GAAG,EAAE,CAAC;oBACvB,aAAQ,GAAG,IAAI,CAAC;oBAEhB,cAAS,GAAG,CAAC,CAAC;oBAOb,gBAAW,GAAG,IAAI,mBAAY,EAAa,CAAC;oBAoFtD,eAAU,GAAG,UAAC,KAAK;wBACf,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;oBACjC,CAAC,CAAC;gBAlFF,CAAC;gBAED,+BAAQ,GAAR;oBACI,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;oBAC9C,IAAI,IAAI,CAAC,SAAS,GAAG,CAAC,EAAE;wBACpB,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC;qBAC7C;gBACL,CAAC;gBAEO,kCAAW,GAAnB,UAAoB,MAAM;oBACtB,IAAI,QAAQ,GAAQ,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;oBACxD,OAAO,IAAI,0BAAK,CAAC;wBACb,KAAK,EAAE;4BACH,mBAAmB,EAAE,SAAS;4BAC9B,eAAe,EAAE,SAAS;4BAC1B,UAAU,EAAE,KAAK;4BACjB,IAAI,EAAE,KAAK;4BACX,QAAQ,EAAE,QAAQ;yBACrB;wBACD,SAAS,EAAE;4BACP,OAAO,EAAE,IAAI,CAAC,QAAQ;4BACtB,OAAO,EAAE;gCACL,aAAa,EAAE;oCACX,OAAO,EAAE,IAAI;iCAChB;6BACJ;yBACJ;wBACD,KAAK,EAAE;4BACH,IAAI,EAAE,IAAI,CAAC,UAAU;4BACrB,KAAK,EAAE,IAAI,CAAC,eAAe;yBAC9B;wBACD,QAAQ,EAAE;4BACN,IAAI,EAAE,IAAI,CAAC,aAAa;yBAC3B;wBACD,OAAO,EAAE;4BACL,WAAW,EAAE,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,MAAM,CAAC,GAAG,oBAAoB;yBACzE;wBACD,OAAO,EAAE;4BACL,OAAO,EAAE,KAAK;yBACjB;wBACD,WAAW,EAAE;4BACT,GAAG,EAAE;gCACD,MAAM,EAAE,CAAC,KAAK,EAAE,KAAK,CAAC;gCACtB,gBAAgB,EAAE,IAAI;gCACtB,MAAM,EAAE,SAAS;gCACjB,UAAU,EAAE;oCACR,OAAO,EAAE,IAAI,CAAC,YAAY;oCAC1B,MAAM,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,+CAA+C;wCAC5E,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,oCAAoC,CAAC,CAAC,CAAC,oCAAoC;oCACzG,QAAQ,EAAE,IAAI,CAAC,iBAAiB;iCAKnC;6BACJ;4BACD,MAAM,EAAE;gCACJ,MAAM,EAAE,SAAS;gCACjB,MAAM,EAAE;oCACJ,KAAK,EAAE,IAAI,CAAC,UAAU;iCACzB;6BACJ;yBACJ;wBACD,MAAM,EAAE,CAAC,MAAM,CAAC;qBACnB,CAAC,CAAC;gBACP,CAAC;gBAEM,kCAAW,GAAlB,UAAmB,QAAQ;oBACvB,IAAI,QAAQ,EAAE;wBACV,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC;qBAC9B;yBAAM;wBACH,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;qBACjD;gBACL,CAAC;gBAWD,kCAAW,GAAX,UAAY,OAAsB;oBAAlC,iBAMC;oBALG,IAAI,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,WAAW,EAAE;wBACrD,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC;4BACV,KAAI,CAAC,QAAQ,GAAG,KAAI,CAAC,WAAW,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,YAAY,CAAC,CAAC;wBACrE,CAAC,CAAC,CAAC;qBACN;gBACL,CAAC;gBAED,mCAAY,GAAZ,UAAa,CAAM;gBACnB,CAAC;gBArHQ;oBAAR,YAAK,EAAE;;2DAAoB;gBAGnB;oBAAR,YAAK,EAAE;;gEAAiB;gBAChB;oBAAR,YAAK,EAAE;;mEAAoB;gBACnB;oBAAR,YAAK,EAAE;;qEAA4B;gBAE3B;oBAAR,YAAK,EAAE;;kEAAqB;gBACpB;oBAAR,YAAK,EAAE;;uEAA0B;gBACzB;oBAAR,YAAK,EAAE;;sEAA0B;gBACzB;oBAAR,YAAK,EAAE;;uEAAwB;gBACvB;oBAAR,YAAK,EAAE;;8DAAiB;gBAEhB;oBAAR,YAAK,EAAE;;+DAAe;gBAId;oBAAR,YAAK,EAAE;;4DAAQ;gBAGN;oBAAT,aAAM,EAAE;;iEAA6C;gBA1B7C,YAAY;oBAPxB,gBAAS,CAAC;wBACP,QAAQ,EAAE,UAAU;wBACpB,MAAM,EAAE;4BACJ,2BAA2B;yBAC9B;wBACD,QAAQ,EAAE,uEAAiE;qBAC9E,CAAC;qDA6B4B,aAAM;wBACA,wBAAU;mBA7BjC,YAAY,CA4HxB;gBAAD,mBAAC;aAAA,AA5HD","sourcesContent":["import {Component, EventEmitter, Input, NgZone, OnChanges, OnInit, Output, SimpleChanges} from '@angular/core';\nimport {Chart} from 'angular-highcharts';\nimport {ChartUtils} from '../../utils/chart.utils';\n\n@Component({\n    selector: 'dash-pie',\n    styles: [\n        '.pieHolder {height: 100%}'\n    ],\n    template: `<div [chart]=\"pieChart\" class=\"pieHolder\" id=\"{{pieId}}\"></div>`\n})\nexport class PieComponent implements OnChanges, OnInit {\n\n    /*\n    *   To assure good height adjustation, please give the parent containers a 'height: 100%'\n    */\n    // pieId = Math.random().toString(36).substring(2, 15);\n    @Input() pieId: string = '';\n\n    // Titles\n    @Input() chartTitle = '';\n    @Input() chartSubTitle = '';\n    @Input() chartTitleAlign = 'center';\n\n    @Input() isShowLabels = true;\n    @Input() isPercentageLabel = true;\n    @Input() isNoDecimalPlace = false;\n    @Input() dataLabelDistance = 30;\n    @Input() isExport = true;\n\n    @Input() innerSize = 0;\n\n    // E.G. Series:\n    // [{name: 'Brands', data: [{name: 'IE', y: 56.33}, {name: 'Chrome', y: 24.03}]}]\n    @Input() series;\n    public pieChart;\n\n    @Output() clickOutput = new EventEmitter<string []>();\n\n    constructor(private zone: NgZone,\n                private chartUtils: ChartUtils) {\n    }\n\n    ngOnInit() {\n        this.pieChart = this.getPieChart(this.series);\n        if (this.innerSize > 0) {\n            this.series['innerSize'] = this.innerSize;\n        }\n    }\n\n    private getPieChart(series) {\n        let renderTo: any = document.getElementById(this.pieId);\n        return new Chart({\n            chart: {\n                plotBackgroundColor: undefined,\n                plotBorderWidth: undefined,\n                plotShadow: false,\n                type: 'pie',\n                renderTo: renderTo\n            },\n            exporting: {\n                enabled: this.isExport,\n                buttons: {\n                    contextButton: {\n                        enabled: true\n                    },\n                },\n            },\n            title: {\n                text: this.chartTitle,\n                align: this.chartTitleAlign\n            },\n            subtitle: {\n                text: this.chartSubTitle\n            },\n            tooltip: {\n                pointFormat: this.chartUtils.capitalize(series) + ': <b>{point.y}</b>'\n            },\n            credits: {\n                enabled: false\n            },\n            plotOptions: {\n                pie: {\n                    center: ['50%', '50%'],\n                    allowPointSelect: true,\n                    cursor: 'pointer',\n                    dataLabels: {\n                        enabled: this.isShowLabels,\n                        format: this.isPercentageLabel ? '<b>{point.name}</b>: {point.percentage:.1f} %'\n                            : this.isNoDecimalPlace ? '<b>{point.name}</b>: {point.y:.0f}' : '<b>{point.name}</b>: {point.y:.2f}',\n                        distance: this.dataLabelDistance,\n                        /*,\n                      style: {\n                        color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'\n                      }*/\n                    },\n                },\n                series: {\n                    cursor: 'pointer',\n                    events: {\n                        click: this.chartClick,\n                    },\n                },\n            },\n            series: [series]\n        });\n    }\n\n    public redrawChart(isReflow) {\n        if (isReflow) {\n            this.pieChart.ref.reflow();\n        } else {\n            this.pieChart = this.getPieChart(this.series);\n        }\n    }\n\n\n    /*\n    *   Selecting elements on charts or from the outside, will also alter the selected filter elements\n    */\n\n    chartClick = (event) => {\n        this.clickOutput.emit(event);\n    };\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (changes['series'] && !changes['series'].firstChange) {\n            this.zone.run(() => {\n                this.pieChart = this.getPieChart(changes['series'].currentValue);\n            });\n        }\n    }\n\n    convertPoint(a: any) {\n    }\n}\n"]}