{"version":3,"file":"pie.component.js","sourceRoot":"","sources":["../../../components/charts/pie/pie.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {Component, EventEmitter, Input, NgZone, OnChanges, OnInit, Output, SimpleChanges} from '@angular/core';\nimport {Chart} from 'angular-highcharts';\nimport {ChartUtils} from '../../utils/chart.utils';\n\n@Component({\n    selector: 'dash-pie',\n    styles: [\n        '.pieHolder {height: 100%}'\n    ],\n    template: `<div [chart]=\"pieChart\" class=\"pieHolder\" id=\"{{pieId}}\"></div>`\n})\nexport class PieComponent implements OnChanges, OnInit {\n\n    /*\n    *   To assure good height adjustation, please give the parent containers a 'height: 100%'\n    */\n    // pieId = Math.random().toString(36).substring(2, 15);\n    @Input() pieId: string = '';\n\n    // Titles\n    @Input() chartTitle = '';\n    @Input() chartSubTitle = '';\n    @Input() chartTitleAlign = 'center';\n\n    @Input() isShowLabels = true;\n    @Input() isPercentageLabel = true;\n    @Input() isNoDecimalPlace = false;\n    @Input() dataLabelDistance = 30;\n    @Input() isExport = true;\n\n    @Input() innerSize = 0;\n\n    // E.G. Series:\n    // [{name: 'Brands', data: [{name: 'IE', y: 56.33}, {name: 'Chrome', y: 24.03}]}]\n    @Input() series;\n    public pieChart;\n\n    @Output() clickOutput = new EventEmitter<string []>();\n\n    constructor(private zone: NgZone,\n                private chartUtils: ChartUtils) {\n    }\n\n    ngOnInit() {\n        this.pieChart = this.getPieChart(this.series);\n        if (this.innerSize > 0) {\n            this.series['innerSize'] = this.innerSize;\n        }\n    }\n\n    private getPieChart(series) {\n        let renderTo: any = document.getElementById(this.pieId);\n        return new Chart({\n            chart: {\n                plotBackgroundColor: undefined,\n                plotBorderWidth: undefined,\n                plotShadow: false,\n                type: 'pie',\n                renderTo: renderTo\n            },\n            exporting: {\n                enabled: this.isExport,\n                buttons: {\n                    contextButton: {\n                        enabled: true\n                    },\n                },\n            },\n            title: {\n                text: this.chartTitle,\n                align: this.chartTitleAlign\n            },\n            subtitle: {\n                text: this.chartSubTitle\n            },\n            tooltip: {\n                pointFormat: this.chartUtils.capitalize(series) + ': <b>{point.y}</b>'\n            },\n            credits: {\n                enabled: false\n            },\n            plotOptions: {\n                pie: {\n                    center: ['50%', '50%'],\n                    allowPointSelect: true,\n                    cursor: 'pointer',\n                    dataLabels: {\n                        enabled: this.isShowLabels,\n                        format: this.isPercentageLabel ? '<b>{point.name}</b>: {point.percentage:.1f} %'\n                            : this.isNoDecimalPlace ? '<b>{point.name}</b>: {point.y:.0f}' : '<b>{point.name}</b>: {point.y:.2f}',\n                        distance: this.dataLabelDistance,\n                        /*,\n                      style: {\n                        color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'\n                      }*/\n                    },\n                },\n                series: {\n                    cursor: 'pointer',\n                    events: {\n                        click: this.chartClick,\n                    },\n                },\n            },\n            series: [series]\n        });\n    }\n\n    public redrawChart(isReflow) {\n        if (isReflow) {\n            this.pieChart.ref.reflow();\n        } else {\n            this.pieChart = this.getPieChart(this.series);\n        }\n    }\n\n\n    /*\n    *   Selecting elements on charts or from the outside, will also alter the selected filter elements\n    */\n\n    chartClick = (event) => {\n        this.clickOutput.emit(event);\n    };\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (changes['series'] && !changes['series'].firstChange) {\n            this.zone.run(() => {\n                this.pieChart = this.getPieChart(changes['series'].currentValue);\n            });\n        }\n    }\n\n    convertPoint(a: any) {\n    }\n}\n"]}